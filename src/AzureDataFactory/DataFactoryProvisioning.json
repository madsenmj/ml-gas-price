
AzureStorageLinkedService (connects to the Azure Blob storage created above)
{
    "name": "AzureStorageLinkedService",
    "properties": {
        "description": "",
        "hubName": "mmadsenadf_hub",
        "type": "AzureStorage",
        "typeProperties": {
            "connectionString": "DefaultEndpointsProtocol=https;AccountName=mmadsenads;AccountKey=**********"
        }
    }
}
 
EIATableLinkedService [from 0-8] (connects to a website with a table of data to pull the data from that table)
Serivce0
{
    "name": "EIATableLinkedService0",
    "properties": {
        "description": "Gas Prices",
        "hubName": "mmadsenadf_hub",
        "type": "Web",
        "typeProperties": {
            "url": "http://www.eia.gov/opendata/qb.cfm?sdid=PET.EMM_EPM0U_PTE_NUS_DPG.W",
            "authenticationType": "Anonymous"
        }
    }
}
Service (no number)
{
    "name": "EIATableLinkedService",
    "properties": {
        "description": "Crude Oil Spot Price",
        "hubName": "mmadsenadf_hub",
        "type": "Web",
        "typeProperties": {
            "url": "http://www.eia.gov/opendata/qb.cfm?sdid=PET.RWTC.D",
            "authenticationType": "Anonymous"
        }
    }
}
Service2
{
    "name": "EIATableLinkedService2",
    "properties": {
        "description": "Stock of Finished Gas",
        "hubName": "mmadsenadf_hub",
        "type": "Web",
        "typeProperties": {
            "url": "http://www.eia.gov/opendata/qb.cfm?sdid=PET.WGFSTUS1.W",
            "authenticationType": "Anonymous"
        }
    }
}
Service3
{
    "name": "EIATableLinkedService3",
    "properties": {
        "description": "Days supply of gas",
        "hubName": "mmadsenadf_hub",
        "type": "Web",
        "typeProperties": {
            "url": "http://www.eia.gov/opendata/qb.cfm?sdid=PET.W_EPM0_VSD_NUS_DAYS.W",
            "authenticationType": "Anonymous"
        }
    }
}
Service4
{
    "name": "EIATableLinkedService4",
    "properties": {
        "description": "Gas Imports",
        "hubName": "mmadsenadf_hub",
        "type": "Web",
        "typeProperties": {
            "url": "http://www.eia.gov/opendata/qb.cfm?sdid=PET.WGTIMUS2.W",
            "authenticationType": "Anonymous"
        }
    }
}
Service5
{
    "name": "EIATableLinkedService5",
    "properties": {
        "description": "Refinery Utilization",
        "hubName": "mmadsenadf_hub",
        "type": "Web",
        "typeProperties": {
            "url": "http://www.eia.gov/opendata/qb.cfm?sdid=PET.WPULEUS3.W",
            "authenticationType": "Anonymous"
        }
    }
}
Service6 (not used)
Service7
{
    "name": "EIATableLinkedService7",
    "properties": {
        "description": "Crude Oil Exports",
        "hubName": "mmadsenadf_hub",
        "type": "Web",
        "typeProperties": {
            "url": "http://www.eia.gov/opendata/qb.cfm?sdid=PET.WCREXUS2.W",
            "authenticationType": "Anonymous"
        }
    }
}
Service8
{
    "name": "EIATableLinkedService8",
    "properties": {
        "description": "Crude Oil Imports",
        "hubName": "mmadsenadf_hub",
        "type": "Web",
        "typeProperties": {
            "url": "http://www.eia.gov/opendata/qb.cfm?sdid=PET.WCRIMUS2.W",
            "authenticationType": "Anonymous"
        }
    }
}
 
GasPriceAzureMLLinkedService 
{
    "name": "GasPriceAzureMLLinkedService",
    "properties": {
        "hubName": "mmadsenadf_hub",
        "type": "AzureML",
        "typeProperties": {
            "mlEndpoint": "https://ussouthcentral.services.azureml.net/workspaces/c9d5f231664846ffa0399a8aa28477dd/services/43af877277a04cda8a5f96e92114948a/jobs?api-version=2.0",
            "apiKey": "**********"
        }
    }
}
 
HDInsightOnDemandLinkedService
{
    "name": "HDInsightOnDemandLinkedService",
    "properties": {
        "description": "",
        "hubName": "mmadsenadf_hub",
        "type": "HDInsightOnDemand",
        "typeProperties": {
            "version": "3.2",
            "clusterSize": 1,
            "timeToLive": "00:05:00",
            "osType": "Linux",
            "coreConfiguration": {},
            "hBaseConfiguration": {},
            "hdfsConfiguration": {},
            "hiveConfiguration": {},
            "mapReduceConfiguration": {},
            "oozieConfiguration": {},
            "sparkConfiguration": {},
            "stormConfiguration": {},
            "yarnConfiguration": {},
            "additionalLinkedServiceNames": [],
            "linkedServiceName": "AzureStorageLinkedService"
        }
    }
}
 
EIATableDataset [from 0-8] (inputs the web tables)
{
    "name": "EIATableDataset0",
    "properties": {
        "published": false,
        "type": "WebTable",
        "linkedServiceName": "EIATableLinkedService0",
        "typeProperties": {
            "index": 0
        },
        "availability": {
            "frequency": "Month",
            "interval": 1
        },
        "external": true,
        "policy": {}
    }
}
 
{
    "name": "EIATableDataset",
    "properties": {
        "published": false,
        "type": "WebTable",
        "linkedServiceName": "EIATableLinkedService",
        "typeProperties": {
            "index": 0
        },
        "availability": {
            "frequency": "Month",
            "interval": 1
        },
        "external": true,
        "policy": {}
    }
}
 
{
    "name": "EIATableDataset2",
    "properties": {
        "published": false,
        "type": "WebTable",
        "linkedServiceName": "EIATableLinkedService2",
        "typeProperties": {
            "index": 0
        },
        "availability": {
            "frequency": "Month",
            "interval": 1
        },
        "external": true,
        "policy": {}
    }
}
 
{
    "name": "EIATableDataset3",
    "properties": {
        "published": false,
        "type": "WebTable",
        "linkedServiceName": "EIATableLinkedService3",
        "typeProperties": {
            "index": 0
        },
        "availability": {
            "frequency": "Month",
            "interval": 1
        },
        "external": true,
        "policy": {}
    }
}
 
{
    "name": "EIATableDataset4",
    "properties": {
        "published": false,
        "type": "WebTable",
        "linkedServiceName": "EIATableLinkedService4",
        "typeProperties": {
            "index": 0
        },
        "availability": {
            "frequency": "Month",
            "interval": 1
        },
        "external": true,
        "policy": {}
    }
}
 
{
    "name": "EIATableDataset5",
    "properties": {
        "published": false,
        "type": "WebTable",
        "linkedServiceName": "EIATableLinkedService5",
        "typeProperties": {
            "index": 0
        },
        "availability": {
            "frequency": "Month",
            "interval": 1
        },
        "external": true,
        "policy": {}
    }
}
 
{
    "name": "EIATableDataset7",
    "properties": {
        "published": false,
        "type": "WebTable",
        "linkedServiceName": "EIATableLinkedService7",
        "typeProperties": {
            "index": 0
        },
        "availability": {
            "frequency": "Month",
            "interval": 1
        },
        "external": true,
        "policy": {}
    }
}
 
{
    "name": "EIATableDataset8",
    "properties": {
        "published": false,
        "type": "WebTable",
        "linkedServiceName": "EIATableLinkedService8",
        "typeProperties": {
            "index": 0
        },
        "availability": {
            "frequency": "Month",
            "interval": 1
        },
        "external": true,
        "policy": {}
    }
}
 
EIABlobDataset [from 0-8] (outputs the tables as text files, comma-separated to ABS)
{
    "name": "EIABlobDataset0",
    "properties": {
        "published": false,
        "type": "AzureBlob",
        "linkedServiceName": "AzureStorageLinkedService",
        "typeProperties": {
            "folderPath": "gaspriceprod/price_0_{Year}{Month}{Day}",
            "format": {
                "type": "TextFormat"
            },
            "partitionedBy": [
                {
                    "name": "Year",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "yyyy"
                    }
                },
                {
                    "name": "Month",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "MM"
                    }
                },
                {
                    "name": "Day",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "dd"
                    }
                }
            ]
        },
        "availability": {
            "frequency": "Month",
            "interval": 1
        }
    }
}
 
{
    "name": "EIABlobDataset",
    "properties": {
        "published": false,
        "type": "AzureBlob",
        "linkedServiceName": "AzureStorageLinkedService",
        "typeProperties": {
            "folderPath": "gaspriceprod/input_1_{Year}{Month}{Day}",
            "format": {
                "type": "TextFormat"
            },
            "partitionedBy": [
                {
                    "name": "Year",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "yyyy"
                    }
                },
                {
                    "name": "Month",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "MM"
                    }
                },
                {
                    "name": "Day",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "dd"
                    }
                }
            ]
        },
        "availability": {
            "frequency": "Month",
            "interval": 1
        }
    }
}
 
{
    "name": "EIABlobDataset2",
    "properties": {
        "published": false,
        "type": "AzureBlob",
        "linkedServiceName": "AzureStorageLinkedService",
        "typeProperties": {
            "folderPath": "gaspriceprod/input_2_{Year}{Month}{Day}",
            "format": {
                "type": "TextFormat"
            },
            "partitionedBy": [
                {
                    "name": "Year",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "yyyy"
                    }
                },
                {
                    "name": "Month",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "MM"
                    }
                },
                {
                    "name": "Day",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "dd"
                    }
                }
            ]
        },
        "availability": {
            "frequency": "Month",
            "interval": 1
        }
    }
}
 
{
    "name": "EIABlobDataset3",
    "properties": {
        "published": false,
        "type": "AzureBlob",
        "linkedServiceName": "AzureStorageLinkedService",
        "typeProperties": {
            "folderPath": "gaspriceprod/input_3_{Year}{Month}{Day}",
            "format": {
                "type": "TextFormat"
            },
            "partitionedBy": [
                {
                    "name": "Year",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "yyyy"
                    }
                },
                {
                    "name": "Month",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "MM"
                    }
                },
                {
                    "name": "Day",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "dd"
                    }
                }
            ]
        },
        "availability": {
            "frequency": "Month",
            "interval": 1
        }
    }
}
 
{
    "name": "EIABlobDataset4",
    "properties": {
        "published": false,
        "type": "AzureBlob",
        "linkedServiceName": "AzureStorageLinkedService",
        "typeProperties": {
            "folderPath": "gaspriceprod/input_4_{Year}{Month}{Day}",
            "format": {
                "type": "TextFormat"
            },
            "partitionedBy": [
                {
                    "name": "Year",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "yyyy"
                    }
                },
                {
                    "name": "Month",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "MM"
                    }
                },
                {
                    "name": "Day",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "dd"
                    }
                }
            ]
        },
        "availability": {
            "frequency": "Month",
            "interval": 1
        }
    }
}
 
{
    "name": "EIABlobDataset5",
    "properties": {
        "published": false,
        "type": "AzureBlob",
        "linkedServiceName": "AzureStorageLinkedService",
        "typeProperties": {
            "folderPath": "gaspriceprod/input_5_{Year}{Month}{Day}",
            "format": {
                "type": "TextFormat"
            },
            "partitionedBy": [
                {
                    "name": "Year",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "yyyy"
                    }
                },
                {
                    "name": "Month",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "MM"
                    }
                },
                {
                    "name": "Day",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "dd"
                    }
                }
            ]
        },
        "availability": {
            "frequency": "Month",
            "interval": 1
        }
    }
}
 
{
    "name": "EIABlobDataset7",
    "properties": {
        "published": false,
        "type": "AzureBlob",
        "linkedServiceName": "AzureStorageLinkedService",
        "typeProperties": {
            "folderPath": "gaspriceprod/input_7_{Year}{Month}{Day}",
            "format": {
                "type": "TextFormat"
            },
            "partitionedBy": [
                {
                    "name": "Year",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "yyyy"
                    }
                },
                {
                    "name": "Month",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "MM"
                    }
                },
                {
                    "name": "Day",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "dd"
                    }
                }
            ]
        },
        "availability": {
            "frequency": "Month",
            "interval": 1
        }
    }
}
 
{
    "name": "EIABlobDataset8",
    "properties": {
        "published": false,
        "type": "AzureBlob",
        "linkedServiceName": "AzureStorageLinkedService",
        "typeProperties": {
            "folderPath": "gaspriceprod/input_8_{Year}{Month}{Day}",
            "format": {
                "type": "TextFormat"
            },
            "partitionedBy": [
                {
                    "name": "Year",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "yyyy"
                    }
                },
                {
                    "name": "Month",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "MM"
                    }
                },
                {
                    "name": "Day",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "dd"
                    }
                }
            ]
        },
        "availability": {
            "frequency": "Month",
            "interval": 1
        }
    }
}
 
EIAPigInput (input the pig script)
{
    "name": "EIAPigInput",
    "properties": {
        "published": false,
        "type": "AzureBlob",
        "linkedServiceName": "AzureStorageLinkedService",
        "typeProperties": {
            "folderPath": "gaspriceprod",
            "format": {
                "type": "TextFormat",
                "rowDelimiter": "\n",
                "columnDelimiter": ","
            }
        },
        "availability": {
            "frequency": "Month",
            "interval": 1
        },
        "external": true,
        "policy": {}
    }
}
 
EIAPigOutput (output the results of the pig script)
{
    "name": "EIAPigOutput",
    "properties": {
        "published": false,
        "type": "AzureBlob",
        "linkedServiceName": "AzureStorageLinkedService",
        "typeProperties": {
            "folderPath": "gaspriceprod",
            "format": {
                "type": "TextFormat",
                "rowDelimiter": "\n",
                "columnDelimiter": ","
            }
        },
        "availability": {
            "frequency": "Month",
            "interval": 1
        }
    }
}
 
EIAAzureMLResultBlob (creates a prediction of data based on the Azure ML model)
{
    "name": "EIAAzureMLResultBlob",
    "properties": {
        "published": false,
        "type": "AzureBlob",
        "linkedServiceName": "AzureStorageLinkedService",
        "typeProperties": {
            "fileName": "{folderpart}predictionresult.csv",
            "folderPath": "gaspriceprod/",
            "format": {
                "type": "TextFormat",
                "columnDelimiter": ","
            },
            "partitionedBy": [
                {
                    "name": "folderpart",
                    "value": {
                        "type": "DateTime",
                        "date": "SliceStart",
                        "format": "yyyyMMdd"
                    }
                }
            ]
        },
        "availability": {
            "frequency": "Month",
            "interval": 1
        }
    }
}
 
EIAtoBlobPipeline (get the data from the web tables and save it on the ABS)
{
    "name": "EIAtoBlobPipeline",
    "properties": {
        "description": "pipeline with copy activity",
        "activities": [
            {
                "type": "Copy",
                "typeProperties": {
                    "source": {
                        "type": "WebSource"
                    },
                    "sink": {
                        "type": "BlobSink",
                        "writeBatchSize": 100,
                        "writeBatchTimeout": "00:00:00"
                    }
                },
                "inputs": [
                    {
                        "name": "EIATableDataset"
                    }
                ],
                "outputs": [
                    {
                        "name": "EIABlobDataset"
                    }
                ],
                "policy": {
                    "timeout": "01:00:00",
                    "concurrency": 1
                },
                "scheduler": {
                    "frequency": "Month",
                    "interval": 1
                },
                "name": "WebTableToAzureBlob",
                "description": "Copy from a Web table to an Azure blob"
            },
            {
                "type": "Copy",
                "typeProperties": {
                    "source": {
                        "type": "WebSource"
                    },
                    "sink": {
                        "type": "BlobSink",
                        "writeBatchSize": 100,
                        "writeBatchTimeout": "00:00:00"
                    }
                },
                "inputs": [
                    {
                        "name": "EIATableDataset2"
                    }
                ],
                "outputs": [
                    {
                        "name": "EIABlobDataset2"
                    }
                ],
                "policy": {
                    "timeout": "01:00:00",
                    "concurrency": 1
                },
                "scheduler": {
                    "frequency": "Month",
                    "interval": 1
                },
                "name": "WebTableToAzureBlob2",
                "description": "Copy from a Web table to an Azure blob"
            },
            {
                "type": "Copy",
                "typeProperties": {
                    "source": {
                        "type": "WebSource"
                    },
                    "sink": {
                        "type": "BlobSink",
                        "writeBatchSize": 100,
                        "writeBatchTimeout": "00:00:00"
                    }
                },
                "inputs": [
                    {
                        "name": "EIATableDataset3"
                    }
                ],
                "outputs": [
                    {
                        "name": "EIABlobDataset3"
                    }
                ],
                "policy": {
                    "timeout": "01:00:00",
                    "concurrency": 1
                },
                "scheduler": {
                    "frequency": "Month",
                    "interval": 1
                },
                "name": "WebTableToAzureBlob3",
                "description": "Copy from a Web table to an Azure blob"
            },
            {
                "type": "Copy",
                "typeProperties": {
                    "source": {
                        "type": "WebSource"
                    },
                    "sink": {
                        "type": "BlobSink",
                        "writeBatchSize": 100,
                        "writeBatchTimeout": "00:00:00"
                    }
                },
                "inputs": [
                    {
                        "name": "EIATableDataset4"
                    }
                ],
                "outputs": [
                    {
                        "name": "EIABlobDataset4"
                    }
                ],
                "policy": {
                    "timeout": "01:00:00",
                    "concurrency": 1
                },
                "scheduler": {
                    "frequency": "Month",
                    "interval": 1
                },
                "name": "WebTableToAzureBlob4",
                "description": "Copy from a Web table to an Azure blob"
            },
            {
                "type": "Copy",
                "typeProperties": {
                    "source": {
                        "type": "WebSource"
                    },
                    "sink": {
                        "type": "BlobSink",
                        "writeBatchSize": 100,
                        "writeBatchTimeout": "00:00:00"
                    }
                },
                "inputs": [
                    {
                        "name": "EIATableDataset5"
                    }
                ],
                "outputs": [
                    {
                        "name": "EIABlobDataset5"
                    }
                ],
                "policy": {
                    "timeout": "01:00:00",
                    "concurrency": 1
                },
                "scheduler": {
                    "frequency": "Month",
                    "interval": 1
                },
                "name": "WebTableToAzureBlob5",
                "description": "Copy from a Web table to an Azure blob"
            },
            {
                "type": "Copy",
                "typeProperties": {
                    "source": {
                        "type": "WebSource"
                    },
                    "sink": {
                        "type": "BlobSink",
                        "writeBatchSize": 100,
                        "writeBatchTimeout": "00:00:00"
                    }
                },
                "inputs": [
                    {
                        "name": "EIATableDataset7"
                    }
                ],
                "outputs": [
                    {
                        "name": "EIABlobDataset7"
                    }
                ],
                "policy": {
                    "timeout": "01:00:00",
                    "concurrency": 1
                },
                "scheduler": {
                    "frequency": "Month",
                    "interval": 1
                },
                "name": "WebTableToAzureBlob7",
                "description": "Copy from a Web table to an Azure blob"
            },
            {
                "type": "Copy",
                "typeProperties": {
                    "source": {
                        "type": "WebSource"
                    },
                    "sink": {
                        "type": "BlobSink",
                        "writeBatchSize": 100,
                        "writeBatchTimeout": "00:00:00"
                    }
                },
                "inputs": [
                    {
                        "name": "EIATableDataset8"
                    }
                ],
                "outputs": [
                    {
                        "name": "EIABlobDataset8"
                    }
                ],
                "policy": {
                    "timeout": "01:00:00",
                    "concurrency": 1
                },
                "scheduler": {
                    "frequency": "Month",
                    "interval": 1
                },
                "name": "WebTableToAzureBlob8",
                "description": "Copy from a Web table to an Azure blob"
            },
            {
                "type": "Copy",
                "typeProperties": {
                    "source": {
                        "type": "WebSource"
                    },
                    "sink": {
                        "type": "BlobSink",
                        "writeBatchSize": 100,
                        "writeBatchTimeout": "00:00:00"
                    }
                },
                "inputs": [
                    {
                        "name": "EIATableDataset0"
                    }
                ],
                "outputs": [
                    {
                        "name": "EIABlobDataset0"
                    }
                ],
                "policy": {
                    "timeout": "01:00:00",
                    "concurrency": 1
                },
                "scheduler": {
                    "frequency": "Month",
                    "interval": 1
                },
                "name": "WebTableToAzureBlob0",
                "description": "Copy from a Web table to an Azure blob"
            }
        ],
        "start": "2014-06-01T18:00:00Z",
        "end": "2014-06-01T19:00:00Z",
        "isPaused": false,
        "hubName": "mmadsenadf_hub",
        "pipelineMode": "Scheduled"
    }
}
 
EIAPigPipeline (run the pig script to process the data)
{
    "name": "EIAPigPipeline",
    "properties": {
        "activities": [
            {
                "type": "HDInsightPig",
                "typeProperties": {
                    "scriptPath": "gaspriceprod\\oilproc.pig",
                    "scriptLinkedService": "AzureStorageLinkedService"
                },
                "inputs": [
                    {
                        "name": "EIAPigInput"
                    }
                ],
                "outputs": [
                    {
                        "name": "EIAPigOutput"
                    }
                ],
                "scheduler": {
                    "frequency": "Month",
                    "interval": 1
                },
                "name": "PigActivitySample",
                "linkedServiceName": "HDInsightOnDemandLinkedService"
            }
        ],
        "start": "2014-06-01T18:00:00Z",
        "end": "2014-06-01T19:00:00Z",
        "isPaused": false,
        "hubName": "mmadsenadf_hub",
        "pipelineMode": "Scheduled"
    }
}
 
EIAPredictivePipeline (run the AML model against the data to make predictions
{
    "name": "EIAPredictivePipeline",
    "properties": {
        "description": "use AzureML model",
        "activities": [
            {
                "type": "AzureMLBatchExecution",
                "typeProperties": {
                    "webServiceOutputs": {
                        "output1": "EIAAzureMLResultBlob"
                    },
                    "globalParameters": {
                        "Path to container, directory or blob": "gaspriceprod/testfeatures.txt/part-r-00000"
                    }
                },
                "outputs": [
                    {
                        "name": "EIAAzureMLResultBlob"
                    }
                ],
                "policy": {
                    "timeout": "02:00:00",
                    "concurrency": 3,
                    "executionPriorityOrder": "NewestFirst",
                    "retry": 1
                },
                "scheduler": {
                    "frequency": "Month",
                    "interval": 1
                },
                "name": "MLActivity",
                "description": "prediction analysis on batch input",
                "linkedServiceName": "GasPriceAzureMLLinkedService"
            }
        ],
        "start": "2015-02-13T00:00:00Z",
        "end": "2015-02-14T00:00:00Z",
        "isPaused": false,
        "hubName": "mmadsenadf_hub",
        "pipelineMode": "Scheduled"
    }
}

{
    "name": "EIAPipeline",
    "properties": {
        "description": "pipeline with copy activity, pig processing activity, and machine learning prediction activity",
        "activities": [
            {
                "type": "Copy",
                "typeProperties": {
                    "source": {
                        "type": "WebSource"
                    },
                    "sink": {
                        "type": "BlobSink",
                        "writeBatchSize": 100,
                        "writeBatchTimeout": "00:00:00"
                    }
                },
                "inputs": [
                    {
                        "name": "EIATableData1"
                    }
                ],
                "outputs": [
                    {
                        "name": "EIABlobData1"
                    }
                ],
                "policy": {
                    "timeout": "01:00:00",
                    "concurrency": 1
                },
                "scheduler": {
                    "frequency": "Week",
                    "interval": 1
                },
                "name": "WebTableToAzureBlob",
                "description": "Copy from a Web table to an Azure blob"
            },
            {
                "type": "Copy",
                "typeProperties": {
                    "source": {
                        "type": "WebSource"
                    },
                    "sink": {
                        "type": "BlobSink",
                        "writeBatchSize": 100,
                        "writeBatchTimeout": "00:00:00"
                    }
                },
                "inputs": [
                    {
                        "name": "EIATableData2"
                    }
                ],
                "outputs": [
                    {
                        "name": "EIABlobData2"
                    }
                ],
                "policy": {
                    "timeout": "01:00:00",
                    "concurrency": 1
                },
                "scheduler": {
                    "frequency": "Week",
                    "interval": 1
                },
                "name": "WebTableToAzureBlob2",
                "description": "Copy from a Web table to an Azure blob"
            },
            {
                "type": "Copy",
                "typeProperties": {
                    "source": {
                        "type": "WebSource"
                    },
                    "sink": {
                        "type": "BlobSink",
                        "writeBatchSize": 100,
                        "writeBatchTimeout": "00:00:00"
                    }
                },
                "inputs": [
                    {
                        "name": "EIATableData3"
                    }
                ],
                "outputs": [
                    {
                        "name": "EIABlobData3"
                    }
                ],
                "policy": {
                    "timeout": "01:00:00",
                    "concurrency": 1
                },
                "scheduler": {
                    "frequency": "Week",
                    "interval": 1
                },
                "name": "WebTableToAzureBlob3",
                "description": "Copy from a Web table to an Azure blob"
            },
            {
                "type": "Copy",
                "typeProperties": {
                    "source": {
                        "type": "WebSource"
                    },
                    "sink": {
                        "type": "BlobSink",
                        "writeBatchSize": 100,
                        "writeBatchTimeout": "00:00:00"
                    }
                },
                "inputs": [
                    {
                        "name": "EIATableData4"
                    }
                ],
                "outputs": [
                    {
                        "name": "EIABlobData4"
                    }
                ],
                "policy": {
                    "timeout": "01:00:00",
                    "concurrency": 1
                },
                "scheduler": {
                    "frequency": "Week",
                    "interval": 1
                },
                "name": "WebTableToAzureBlob4",
                "description": "Copy from a Web table to an Azure blob"
            },
            {
                "type": "Copy",
                "typeProperties": {
                    "source": {
                        "type": "WebSource"
                    },
                    "sink": {
                        "type": "BlobSink",
                        "writeBatchSize": 100,
                        "writeBatchTimeout": "00:00:00"
                    }
                },
                "inputs": [
                    {
                        "name": "EIATableData5"
                    }
                ],
                "outputs": [
                    {
                        "name": "EIABlobData5"
                    }
                ],
                "policy": {
                    "timeout": "01:00:00",
                    "concurrency": 1
                },
                "scheduler": {
                    "frequency": "Week",
                    "interval": 1
                },
                "name": "WebTableToAzureBlob5",
                "description": "Copy from a Web table to an Azure blob"
            },
            {
                "type": "Copy",
                "typeProperties": {
                    "source": {
                        "type": "WebSource"
                    },
                    "sink": {
                        "type": "BlobSink",
                        "writeBatchSize": 100,
                        "writeBatchTimeout": "00:00:00"
                    }
                },
                "inputs": [
                    {
                        "name": "EIATableData7"
                    }
                ],
                "outputs": [
                    {
                        "name": "EIABlobData7"
                    }
                ],
                "policy": {
                    "timeout": "01:00:00",
                    "concurrency": 1
                },
                "scheduler": {
                    "frequency": "Week",
                    "interval": 1
                },
                "name": "WebTableToAzureBlob7",
                "description": "Copy from a Web table to an Azure blob"
            },
            {
                "type": "Copy",
                "typeProperties": {
                    "source": {
                        "type": "WebSource"
                    },
                    "sink": {
                        "type": "BlobSink",
                        "writeBatchSize": 100,
                        "writeBatchTimeout": "00:00:00"
                    }
                },
                "inputs": [
                    {
                        "name": "EIATableData8"
                    }
                ],
                "outputs": [
                    {
                        "name": "EIABlobData8"
                    }
                ],
                "policy": {
                    "timeout": "01:00:00",
                    "concurrency": 1
                },
                "scheduler": {
                    "frequency": "Week",
                    "interval": 1
                },
                "name": "WebTableToAzureBlob8",
                "description": "Copy from a Web table to an Azure blob"
            },
            {
                "type": "Copy",
                "typeProperties": {
                    "source": {
                        "type": "WebSource"
                    },
                    "sink": {
                        "type": "BlobSink",
                        "writeBatchSize": 100,
                        "writeBatchTimeout": "00:00:00"
                    }
                },
                "inputs": [
                    {
                        "name": "EIATableData0"
                    }
                ],
                "outputs": [
                    {
                        "name": "EIABlobData0"
                    }
                ],
                "policy": {
                    "timeout": "01:00:00",
                    "concurrency": 1
                },
                "scheduler": {
                    "frequency": "Week",
                    "interval": 1
                },
                "name": "WebTableToAzureBlob0",
                "description": "Copy from a Web table to an Azure blob"
            },
            {
                "type": "HDInsightPig",
                "typeProperties": {
                    "scriptPath": "pricepredictor\\oilprocweek.pig",
                    "scriptLinkedService": "AzureStorageLinkedService",
                    "defines": {
                        "Input1": "$$Text.Format('wasb://pricepredictor@mmadsenads.blob.core.windows.net/{0:yyyy}{0:MM}{0:dd}/input_1/',SliceStart)",
                        "Input2": "$$Text.Format('wasb://pricepredictor@mmadsenads.blob.core.windows.net/{0:yyyy}{0:MM}{0:dd}/input_2/',SliceStart)",
                        "Input3": "$$Text.Format('wasb://pricepredictor@mmadsenads.blob.core.windows.net/{0:yyyy}{0:MM}{0:dd}/input_3/',SliceStart)",
                        "Input4": "$$Text.Format('wasb://pricepredictor@mmadsenads.blob.core.windows.net/{0:yyyy}{0:MM}{0:dd}/input_4/',SliceStart)",
                        "Input5": "$$Text.Format('wasb://pricepredictor@mmadsenads.blob.core.windows.net/{0:yyyy}{0:MM}{0:dd}/input_5/',SliceStart)",
                        "Input7": "$$Text.Format('wasb://pricepredictor@mmadsenads.blob.core.windows.net/{0:yyyy}{0:MM}{0:dd}/input_7/',SliceStart)",
                        "Input8": "$$Text.Format('wasb://pricepredictor@mmadsenads.blob.core.windows.net/{0:yyyy}{0:MM}{0:dd}/input_8/',SliceStart)",
                        "Input0": "$$Text.Format('wasb://pricepredictor@mmadsenads.blob.core.windows.net/{0:yyyy}{0:MM}{0:dd}/price_0/',SliceStart)",
                        "Output1": "$$Text.Format('wasb://pricepredictor@mmadsenads.blob.core.windows.net/{0:yyyy}{0:MM}{0:dd}/trainfeatures.txt',SliceStart)",
                        "Output2": "$$Text.Format('wasb://pricepredictor@mmadsenads.blob.core.windows.net/{0:yyyy}{0:MM}{0:dd}/testfeatures.txt',SliceStart)",
                        "Output3": "$$Text.Format('wasb://pricepredictor@mmadsenads.blob.core.windows.net/{0:yyyy}{0:MM}{0:dd}/trainvalues.txt',SliceStart)",
                        "Output4": "$$Text.Format('wasb://pricepredictor@mmadsenads.blob.core.windows.net/{0:yyyy}{0:MM}{0:dd}/testvalues.txt',SliceStart)"
                    }
                },
                "inputs": [
                    {
                        "name": "EIABlobData0"
                    },
                    {
                        "name": "EIABlobData1"
                    },
                    {
                        "name": "EIABlobData2"
                    },
                    {
                        "name": "EIABlobData3"
                    },
                    {
                        "name": "EIABlobData4"
                    },
                    {
                        "name": "EIABlobData5"
                    },
                    {
                        "name": "EIABlobData7"
                    },
                    {
                        "name": "EIABlobData8"
                    }
                ],
                "outputs": [
                    {
                        "name": "EIAPigWeekOutput"
                    }
                ],
                "scheduler": {
                    "frequency": "Week",
                    "interval": 1
                },
                "name": "PigActivitySample",
                "linkedServiceName": "HDInsightOnDemandLinkedService"
            },
            {
                "type": "AzureMLBatchExecution",
                "typeProperties": {
                    "webServiceOutputs": {
                        "output1": "EIAMLResultBlob"
                    },
                    "globalParameters": {
                        "Path to container, directory or blob": "$$Text.Format('pricepredictor/{0:yyyy}{0:MM}{0:dd}/testfeatures.txt/part-r-00000',SliceStart)"
                    }
                },
                "inputs": [
                    {
                        "name": "EIAPigWeekOutput"
                    }
                ],
                "outputs": [
                    {
                        "name": "EIAMLResultBlob"
                    }
                ],
                "policy": {
                    "timeout": "02:00:00",
                    "concurrency": 3,
                    "executionPriorityOrder": "NewestFirst",
                    "retry": 1
                },
                "scheduler": {
                    "frequency": "Week",
                    "interval": 1
                },
                "name": "MLActivity",
                "description": "prediction analysis on batch input",
                "linkedServiceName": "GasPriceAzureMLLinkedService"
            }
        ],
        "start": "2016-04-01T00:00:00Z",
        "end": "2016-08-01T00:00:00Z",
        "isPaused": false,
        "hubName": "mmadsenadf_hub",
        "pipelineMode": "Scheduled"
    }
}

